(function(t){function e(e){for(var i,r,s=e[0],c=e[1],l=e[2],d=0,p=[];d<s.length;d++)r=s[d],a[r]&&p.push(a[r][0]),a[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(i=!1)}i&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},a={app:0},o=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"1eb9":function(t,e,n){"use strict";var i=n("2b0f"),a=n.n(i);a.a},"2b0f":function(t,e,n){},"2e95":function(t,e,n){"use strict";var i=n("6384"),a=n.n(i);a.a},4965:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],r=(n("5c0b"),n("2877")),s={},c=Object(r["a"])(s,a,o,!1,null,null,null),l=c.exports,u=n("8c4f"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pages-view"},[n("header-bar"),n("router-view")],1)},p=[],f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header-bar"},[n("van-nav-bar",{attrs:{title:"评分"},on:{"click-left":t.onClickLeft,"click-right":t.onClickRight}},[n("van-icon",{attrs:{slot:"right",name:"wap-home"},slot:"right"})],1)],1)},h=[],m={name:"header-bar",data:function(){return{}},methods:{onClickRight:function(){this.$router.push("/")},onClickLeft:function(){this.$router.push("/statistics/")}}},v=m,g=(n("2e95"),Object(r["a"])(v,f,h,!1,null,"47c4c7eb",null)),b=g.exports,$={name:"pages-view",components:{HeaderBar:b},data:function(){return{}},methods:{}},x=$,_=Object(r["a"])(x,d,p,!1,null,"7401c311",null),w=_.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,function(t){return n("van-cell",{key:t.id,attrs:{title:t.name,to:{name:"CompositionList",params:{id:t.id}}}})}),1)},k=[],C={name:"CompetitionList",data:function(){return{finished:!0,loading:!1,list:[]}},methods:{alert:function(t){var e=this;e.$dialog.alert({title:"获取比赛信息失败",message:t})}},mounted:function(){var t=this;this.$http.get("/api/competition/").then(function(e){t.list=e.data}).catch(function(e){var n=e;e.response?t.alert(n):(e.request,t.alert(n))})}},S=C,j=Object(r["a"])(S,y,k,!1,null,"30d96a9a",null),O=j.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,function(e){return n("van-cell",{key:e.id,attrs:{title:t.title(e)},on:{click:function(n){return t.to(e)}}})}),1)},E=[],q=(n("7f7f"),{name:"CompositionList",data:function(){return{id:null,finished:!0,loading:!1,list:[]}},created:function(){var t=this;t.id=this.$route.params.id},methods:{title:function(t){return t.score?t.name+" 得分 "+t.score:t.name},to:function(t){var e=this;t.score?e.$dialog.alert({title:"警告",message:"评分不可修改！"}):e.$router.push("/judge/"+t.id)},alert:function(t){var e=this;e.$dialog.alert({title:"获取团队信息失败",message:t})}},mounted:function(){var t=this;t.$http.get("/api/composition/?competition="+t.id).then(function(e){t.list=e.data}).catch(function(e){var n=e;e.response?t.alert(n):(e.request,t.alert(n))})}}),I=q,P=Object(r["a"])(I,L,E,!1,null,"6833a29e",null),A=P.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-cell-group",[n("van-field",{attrs:{clearable:"",label:"创新",placeholder:"请输入评分",required:"","right-icon":"question-o"},on:{"click-right-icon":function(e){return t.$toast(t.question)}},model:{value:t.innovateScore,callback:function(e){t.innovateScore=e},expression:"innovateScore"}}),n("van-field",{attrs:{clearable:"",label:"实用",placeholder:"请输入评分",required:"","right-icon":"question-o"},on:{"click-right-icon":function(e){return t.$toast(t.question)}},model:{value:t.functionalScore,callback:function(e){t.functionalScore=e},expression:"functionalScore"}})],1),n("van-button",{attrs:{size:"large"},on:{click:t.submit}},[t._v("提交成绩")])],1)},B=[],J=n("f499"),R=n.n(J),T=n("e814"),V=n.n(T),M={name:"JudgeView",data:function(){return{id:null,score:null,question:"百分制",innovateScore:null,functionalScore:null,title:"评分"}},created:function(){var t=this;t.id=this.$route.params.id},methods:{alert:function(t){var e=this;e.$dialog.alert({title:"提交失败",message:t})},submit:function(){var t=this;t.innovateScore&&t.functionalScore?(t.score=V()(t.innovateScore)+V()(t.functionalScore),t.$http.post("/api/grade/",{composition:t.id,score:t.score}).then(function(e){t.$toast("提交成功，请继续为其他团队评分"),t.$router.go(-1)}).catch(function(e){var n=e;if(e.response){if(400===e.response.status)return n=R()(e.response.data),void t.alert(n);t.alert(n)}else e.request,t.alert(n)})):t.alert("请填写全部的分项")}}},H=M,G=Object(r["a"])(H,z,B,!1,null,"6deff65e",null),D=G.exports,U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login-input"},[n("van-panel",{attrs:{desc:"描述信息",status:"状态",title:"标题"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("h2",[t._v("请登录")])]),n("van-field",{attrs:{label:"密码",placeholder:"请输入登陆码",required:"",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("van-button",{attrs:{size:"large"},on:{click:t.loginCxy}},[t._v("登陆")])],1)],1)],1)},F=[],K={name:"LoginView",data:function(){return{password:""}},methods:{alert:function(t){var e=this;e.$dialog.alert({title:"登陆失败",message:t})},loginCxy:function(){var t=this,e=this;e.$http.post("/api/token/",{code:e.password}).then(function(e){localStorage["token"]="Bearer "+e.data["access"],t.$http.defaults.headers.common["Authorization"]="Bearer "+e.data["access"],t.$router.push("/")}).catch(function(t){var n=t.message;t.response?("401"===t.response.status&&(n="密码错误"),e.alert(n)):(t.request,e.alert(n))})}}},N=K,Q=(n("80b4"),Object(r["a"])(N,U,F,!1,null,"1414c0c5",null)),W=Q.exports,X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,function(t){return n("van-cell",{key:t.id,attrs:{title:t.name,to:{name:"CompositionListStatistics",params:{id:t.id}}}})}),1)},Y=[],Z={name:"CompetitionListStatistics",data:function(){return{finished:!0,loading:!1,list:[]}},methods:{alert:function(t){var e=this;e.$dialog.alert({title:"获取比赛信息失败",message:t})}},mounted:function(){var t=this;this.$http.get("/api/listcompetition/").then(function(e){t.list=e.data}).catch(function(e){var n=e;e.response?t.alert(n):(e.request,t.alert(n))})}},tt=Z,et=Object(r["a"])(tt,X,Y,!1,null,"0baad65b",null),nt=et.exports,it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,function(e){return n("van-cell",{key:e.id,attrs:{title:t.title(e)}})}),1)},at=[],ot={name:"CompositionListStatistics",data:function(){return{id:null,finished:!0,loading:!1,list:[]}},created:function(){var t=this;t.id=this.$route.params.id},methods:{title:function(t){return t.name+" 总分 "+t.score_amount+" 已评 "+t.judged_count},alert:function(t){var e=this;e.$dialog.alert({title:"获取统计信息失败",message:t})}},mounted:function(){var t=this;t.$http.get("/api/listcomposition/?competition="+t.id).then(function(e){t.list=e.data}).catch(function(e){var n=e;e.response?t.alert(n):(e.request,t.alert(n))})}},rt=ot,st=Object(r["a"])(rt,it,at,!1,null,"1e4be20d",null),ct=st.exports,lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pages-view"},[n("header-bar-statistics"),n("router-view")],1)},ut=[],dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header-bar"},[n("van-nav-bar",{attrs:{title:"统计"},on:{"click-right":t.onClickRight,"click-left":t.onClickLeft}},[n("van-icon",{attrs:{slot:"right",name:"wap-home"},slot:"right"}),n("van-icon",{attrs:{slot:"left",name:"chart-trending-o"},slot:"left"})],1)],1)},pt=[],ft={name:"header-bar-statistics",components:{JudgeView:D},data:function(){return{}},methods:{onClickRight:function(){this.$router.push("/")},onClickLeft:function(){this.$router.push("/statistics/")}}},ht=ft,mt=(n("8932"),Object(r["a"])(ht,dt,pt,!1,null,"1ee6d11b",null)),vt=mt.exports,gt={name:"pages-view-statistics",components:{HeaderBarStatistics:vt},data:function(){return{}},methods:{}},bt=gt,$t=Object(r["a"])(bt,lt,ut,!1,null,"a935db9e",null),xt=$t.exports,_t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",[n("el-header",[n("header-bar-statistics-p-c")],1),n("br"),n("el-container",[n("router-view")],1)],1)},wt=[],yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header-bar-pc"},[n("el-menu",{staticClass:"el-menu-cxy",attrs:{"default-active":t.activeIndex,mode:"horizontal"},on:{select:t.competitionSelect}},[n("el-menu-item",{attrs:{index:"competition"}},[t._v("比赛")])],1)],1)},kt=[],Ct={name:"header-bar-statistics-pc",data:function(){return{activeIndex:"competition"}},methods:{competitionSelect:function(t,e){self=this,this.$router.push("/pc-statistics/competition")}}},St=Ct,jt=Object(r["a"])(St,yt,kt,!1,null,"15dbe0ea",null),Ot=jt.exports,Lt={name:"pages-view-statistics-pc",components:{HeaderBarStatisticsPC:Ot}},Et=Lt,qt=Object(r["a"])(Et,_t,wt,!1,null,"423606d4",null),It=qt.exports,Pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-main",[n("v-chart",{ref:"bar",attrs:{options:t.chart,autoresize:""}})],1)},At=[],zt=(n("ac6a"),n("9ca8")),Bt=(n("313e"),{name:"CompositionListStatisticsPC",components:{"v-chart":zt["a"]},data:function(){return{setInterval:void 0,chart:{legend:{data:["比赛成绩","打分人数"]},toolbox:{show:!0,feature:{saveAsImage:{show:!0},dataView:{show:!0},magicType:{type:["line","bar"]},restore:{show:!0}},right:"10%"},xAxis:{data:[]},yAxis:[{type:"value",scale:!0,name:"比赛成绩",min:0,boundaryGap:[.2,.2]},{type:"value",scale:!0,name:"打分人数",min:0,minInterval:1,boundaryGap:[.2,.2]}],series:[{name:"比赛成绩",type:"bar",yAxisIndex:0,data:[],markLine:{data:[{type:"average",name:"平均值"}]}},{name:"打分人数",type:"bar",yAxisIndex:1,data:[]}]}}},created:function(){var t=this;t.id=this.$route.params.id},methods:{alert:function(t){var e=this;this.$notify({title:"获取统计信息失败",message:e.$createElement("i",{style:"color: red"},t)})},statistics:function(){var t=this;t.$http.get("/api/listcomposition/?competition="+t.id).then(function(e){t.list=e.data;var n=[],i=[],a=[];e.data.forEach(function(t,e){a.push(t.name),n.push(t.score_amount),i.push(t.judged_count)}),t.$refs.bar.mergeOptions({xAxis:{data:a},series:[{name:"比赛成绩",data:n},{name:"打分人数",data:i}]})}).catch(function(e){var n=e;e.response?t.alert(n):(e.request,t.alert(n))})}},mounted:function(){var t=this;t.statistics(),this.setInterval=setInterval(function(){return t.statistics()},1e4),this.setInterval()},beforeDestroy:function(){clearInterval(this.setInterval)}}),Jt=Bt,Rt=(n("1eb9"),Object(r["a"])(Jt,Pt,At,!1,null,null,null)),Tt=Rt.exports,Vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-main",[n("el-table",{staticStyle:{width:"200%"},attrs:{data:t.list,"default-sort":{prop:"date",order:"descending"},stripe:""},on:{"row-click":t.rowSelect}},[n("el-table-column",{attrs:{label:"编号",prop:"id",sortable:"",width:"130"}}),n("el-table-column",{attrs:{label:"比赛名称",prop:"name",sortable:""}}),n("el-table-column",{attrs:{label:"日期",prop:"date",sortable:"",width:"180"}})],1)],1)},Mt=[],Ht={name:"CompetitionListStatisticsPC",data:function(){return{list:[]}},methods:{rowSelect:function(t,e,n){var i=this;i.$router.push({path:"/pc-statistics/composition/"+t.id})},alert:function(t){var e=this;this.$notify({title:"获取比赛信息失败",message:e.$createElement("i",{style:"color: red"},t)})}},mounted:function(){var t=this;this.$http.get("/api/listcompetition/").then(function(e){t.list=e.data}).catch(function(e){var n=e;e.response?t.alert(n):(e.request,t.alert(n))})}},Gt=Ht,Dt=Object(r["a"])(Gt,Vt,Mt,!1,null,"3c45deac",null),Ut=Dt.exports;i["default"].use(u["a"]);var Ft=new u["a"]({mode:"history",base:"/",routes:[{path:"/",redirect:"/competition/",component:w,children:[{path:"competition",name:"CompetitionList",component:O},{path:"composition/:id",name:"CompositionList",component:A},{path:"judge/:id",name:"JudgeView",component:D}]},{path:"/login",component:W},{path:"/statistics",redirect:"/statistics/competition",component:xt,children:[{path:"/statistics/competition",name:"CompetitionListStatistics",component:nt},{path:"/statistics/composition/:id",name:"CompositionListStatistics",component:ct}]},{path:"/pc-statistics",redirect:"/pc-statistics/competition",component:It,children:[{path:"/pc-statistics/competition",name:"CompetitionListStatisticsPC",component:Ut},{path:"/pc-statistics/composition/:id",name:"CompositionListStatisticsPC",component:Tt}]}]});Ft.beforeEach(function(t,e,n){if("/login"!==t.path&&!localStorage.token)return n("/login");n()});var Kt=Ft,Nt=n("2f62");i["default"].use(Nt["a"]);var Qt=new Nt["a"].Store({state:{},mutations:{},actions:{}}),Wt=n("b970"),Xt=(n("157a"),n("795b")),Yt=n.n(Xt),Zt=n("bc3a"),te=n.n(Zt);te.a.defaults.baseURL="http://188.131.201.33",te.a.defaults.headers.post["Content-Type"]="application/json",te.a.interceptors.request.use(function(t){var e=localStorage.getItem("token");return e&&(t.headers.common["Authorization"]=e),t},function(t){return Yt.a.reject(t)}),te.a.interceptors.response.use(function(t){return t},function(t){var e=t.response;if(e)switch(e.status){case 401:case 403:Kt.push("/login"),t.message="登录失效，请重新登录";break}else t.message="网络连接失败，请检查网络";return Yt.a.reject(t)});var ee=te.a,ne=n("5c96"),ie=n.n(ne);n("0fae");i["default"].config.productionTip=!1,i["default"].use(Wt["a"]),i["default"].use(ie.a),i["default"].prototype.$http=ee,new i["default"]({router:Kt,store:Qt,render:function(t){return t(l)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var i=n("5e27"),a=n.n(i);a.a},"5e27":function(t,e,n){},6384:function(t,e,n){},"80b4":function(t,e,n){"use strict";var i=n("4965"),a=n.n(i);a.a},8932:function(t,e,n){"use strict";var i=n("d9f2"),a=n.n(i);a.a},d9f2:function(t,e,n){}});
//# sourceMappingURL=app.853c545e.js.map