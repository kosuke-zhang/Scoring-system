(function(t){function e(e){for(var i,r,s=e[0],l=e[1],c=e[2],d=0,f=[];d<s.length;d++)r=s[d],a[r]&&f.push(a[r][0]),a[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);u&&u(e);while(f.length)f.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(i=!1)}i&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},a={app:0},o=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},4965:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],r=(n("5c0b"),n("2877")),s={},l=Object(r["a"])(s,a,o,!1,null,null,null),c=l.exports,u=n("8c4f"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pages-view"},[n("header-bar"),n("router-view")],1)},f=[],p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header-bar"},[n("van-nav-bar",{attrs:{title:"评分"},on:{"click-left":t.onClickLeft,"click-right":t.onClickRight}},[n("van-icon",{attrs:{slot:"right",name:"wap-home"},slot:"right"}),n("van-icon",{attrs:{slot:"left",name:"chart-trending-o"},slot:"left"})],1)],1)},h=[],m={name:"header-bar",data:function(){return{}},methods:{onClickRight:function(){this.$router.push("/")},onClickLeft:function(){this.$router.push("/statistics/")}}},v=m,g=(n("ac2a"),Object(r["a"])(v,p,h,!1,null,"ae380430",null)),b=g.exports,$={name:"pages-view",components:{HeaderBar:b},data:function(){return{}},methods:{}},_=$,k=Object(r["a"])(_,d,f,!1,null,"e8ab1372",null),w=k.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,function(t){return n("van-cell",{key:t.id,attrs:{title:t.name,to:{name:"CompositionList",params:{id:t.id}}}})}),1)},C=[],j={name:"CompetitionList",data:function(){return{finished:!0,loading:!1,list:[]}},methods:{alert:function(t){var e=this;e.$dialog.alert({title:"获取比赛信息失败",message:t})}},mounted:function(){var t=this;this.$http.get("/api/competition/").then(function(e){t.list=e.data,console.log(e)}).catch(function(e){var n=e;e.response?t.alert(n):(e.request,t.alert(n))})}},y=j,S=Object(r["a"])(y,x,C,!1,null,"d8f07818",null),O=S.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,function(e){return n("van-cell",{key:e.id,attrs:{title:t.title(e)},on:{click:function(n){return t.to(e)}}})}),1)},q=[],E=(n("7f7f"),{name:"CompositionList",data:function(){return{id:null,finished:!0,loading:!1,list:[]}},created:function(){var t=this;t.id=this.$route.params.id},methods:{title:function(t){return t.score?t.name+" 得分 "+t.score:t.name},to:function(t){var e=this;t.score?e.$dialog.alert({title:"警告",message:"评分不可修改！"}):e.$router.push("/judge/"+t.id)},alert:function(t){var e=this;e.$dialog.alert({title:"获取团队信息失败",message:t})}},mounted:function(){var t=this;t.$http.get("/api/composition/?competition="+t.id).then(function(e){t.list=e.data}).catch(function(e){var n=e;e.response?t.alert(n):(e.request,t.alert(n))})}}),P=E,J=Object(r["a"])(P,L,q,!1,null,"6833a29e",null),R=J.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-cell-group",[n("van-field",{attrs:{clearable:"",label:"创新",placeholder:"请输入评分",required:"","right-icon":"question-o"},on:{"click-right-icon":function(e){return t.$toast(t.question)}},model:{value:t.innovateScore,callback:function(e){t.innovateScore=e},expression:"innovateScore"}}),n("van-field",{attrs:{clearable:"",label:"实用",placeholder:"请输入评分",required:"","right-icon":"question-o"},on:{"click-right-icon":function(e){return t.$toast(t.question)}},model:{value:t.functionalScore,callback:function(e){t.functionalScore=e},expression:"functionalScore"}})],1),n("van-button",{attrs:{size:"large"},on:{click:t.submit}},[t._v("提交成绩")])],1)},B=[],M=n("f499"),T=n.n(M),V=n("e814"),A=n.n(V),H={name:"JudgeView",data:function(){return{id:null,score:null,question:"百分制",innovateScore:null,functionalScore:null,title:"评分"}},created:function(){var t=this;t.id=this.$route.params.id},methods:{alert:function(t){var e=this;e.$dialog.alert({title:"提交失败",message:t})},submit:function(){var t=this;t.innovateScore&&t.functionalScore?(t.score=A()(t.innovateScore)+A()(t.functionalScore),t.$http.post("/api/grade/",{composition:t.id,score:t.score}).then(function(e){t.$toast("提交成功，请继续为其他团队评分"),t.$router.go(-1)}).catch(function(e){var n=e;if(e.response){if(400===e.response.status)return n=T()(e.response.data),void t.alert(n);t.alert(n)}else e.request,t.alert(n)})):t.alert("请填写全部的分项")}}},I=H,U=Object(r["a"])(I,z,B,!1,null,"6deff65e",null),D=U.exports,F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login-input"},[n("van-panel",{attrs:{desc:"描述信息",status:"状态",title:"标题"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("h2",[t._v("请登录")])]),n("van-field",{attrs:{label:"密码",placeholder:"请输入登陆码",required:"",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("van-button",{attrs:{size:"large"},on:{click:t.loginCxy}},[t._v("登陆")])],1)],1)],1)},G=[],K={name:"LoginView",data:function(){return{password:""}},methods:{alert:function(t){var e=this;e.$dialog.alert({title:"登陆失败",message:t})},loginCxy:function(){var t=this,e=this;e.$http.post("/api/token/",{code:e.password}).then(function(e){localStorage["token"]="Bearer "+e.data["access"],t.$http.defaults.headers.common["Authorization"]="Bearer "+e.data["access"],t.$router.push("/")}).catch(function(t){var n=t.message;t.response?("401"===t.response.status&&(n="密码错误"),e.alert(n)):(t.request,e.alert(n))})}}},N=K,Q=(n("80b4"),Object(r["a"])(N,F,G,!1,null,"1414c0c5",null)),W=Q.exports,X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,function(t){return n("van-cell",{key:t.id,attrs:{title:t.name,to:{name:"CompositionListStatistics",params:{id:t.id}}}})}),1)},Y=[],Z={name:"CompetitionList",data:function(){return{finished:!0,loading:!1,list:[]}},methods:{alert:function(t){var e=this;e.$dialog.alert({title:"获取比赛信息失败",message:t})}},mounted:function(){var t=this;this.$http.get("/api/listcompetition/").then(function(e){t.list=e.data,console.log(e)}).catch(function(e){var n=e;e.response?t.alert(n):(e.request,t.alert(n))})}},tt=Z,et=Object(r["a"])(tt,X,Y,!1,null,"00986460",null),nt=et.exports,it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,function(e){return n("van-cell",{key:e.id,attrs:{title:t.title(e)}})}),1)},at=[],ot={name:"CompositionList",data:function(){return{id:null,finished:!0,loading:!1,list:[]}},created:function(){var t=this;t.id=this.$route.params.id},methods:{title:function(t){return t.name+" 总分 "+t.score_amount+" 已评 "+t.judged_count},alert:function(t){var e=this;e.$dialog.alert({title:"获取团队信息失败",message:t})}},mounted:function(){var t=this;t.$http.get("/api/listcomposition/?competition="+t.id).then(function(e){t.list=e.data}).catch(function(e){var n=e;e.response?t.alert(n):(e.request,t.alert(n))})}},rt=ot,st=Object(r["a"])(rt,it,at,!1,null,"f5699762",null),lt=st.exports,ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pages-view"},[n("header-bar-statistics"),n("router-view")],1)},ut=[],dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header-bar"},[n("van-nav-bar",{attrs:{title:"统计"},on:{"click-right":t.onClickRight,"click-left":t.onClickLeft}},[n("van-icon",{attrs:{slot:"right",name:"wap-home"},slot:"right"}),n("van-icon",{attrs:{slot:"left",name:"chart-trending-o"},slot:"left"})],1)],1)},ft=[],pt={name:"header-bar-statistics",components:{JudgeView:D},data:function(){return{}},methods:{onClickRight:function(){this.$router.push("/")},onClickLeft:function(){this.$router.push("/statistics/")}}},ht=pt,mt=(n("8932"),Object(r["a"])(ht,dt,ft,!1,null,"1ee6d11b",null)),vt=mt.exports,gt={name:"pages-view",components:{HeaderBarStatistics:vt},data:function(){return{}},methods:{}},bt=gt,$t=Object(r["a"])(bt,ct,ut,!1,null,"4d0604ef",null),_t=$t.exports;i["a"].use(u["a"]);var kt=new u["a"]({mode:"history",base:"/",routes:[{path:"/",redirect:"/competition/",component:w,children:[{path:"competition",name:"CompetitionList",component:O},{path:"composition/:id",name:"CompositionList",component:R},{path:"judge/:id",name:"JudgeView",component:D}]},{path:"/login",component:W},{path:"/statistics",redirect:"/statistics/competition",component:_t,children:[{path:"/statistics/competition",name:"CompetitionListStatistics",component:nt},{path:"/statistics/composition/:id",name:"CompositionListStatistics",component:lt}]}]});kt.beforeEach(function(t,e,n){if("/login"!==t.path&&!localStorage.token)return n("/login");n()});var wt=kt,xt=n("2f62");i["a"].use(xt["a"]);var Ct=new xt["a"].Store({state:{},mutations:{},actions:{}}),jt=n("b970"),yt=(n("157a"),n("795b")),St=n.n(yt),Ot=n("bc3a"),Lt=n.n(Ot);Lt.a.defaults.baseURL="http://188.131.201.33",Lt.a.defaults.headers.post["Content-Type"]="application/json",Lt.a.interceptors.request.use(function(t){var e=localStorage.getItem("token");return e&&(t.headers.common["Authorization"]=e),t},function(t){return St.a.reject(t)}),Lt.a.interceptors.response.use(function(t){return t},function(t){var e=t.response;if(e)switch(e.status){case 401:case 403:wt.push("/login/"),t.message="登录失效，请重新登录";break}else t.message="网络连接失败，请检查网络";return St.a.reject(t)});var qt=Lt.a;i["a"].config.productionTip=!1,i["a"].use(jt["a"]),i["a"].prototype.$http=qt,new i["a"]({router:wt,store:Ct,render:function(t){return t(c)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var i=n("5e27"),a=n.n(i);a.a},"5e27":function(t,e,n){},"80b4":function(t,e,n){"use strict";var i=n("4965"),a=n.n(i);a.a},8932:function(t,e,n){"use strict";var i=n("d9f2"),a=n.n(i);a.a},ac2a:function(t,e,n){"use strict";var i=n("d20d"),a=n.n(i);a.a},d20d:function(t,e,n){},d9f2:function(t,e,n){}});
//# sourceMappingURL=app.876add3a.js.map